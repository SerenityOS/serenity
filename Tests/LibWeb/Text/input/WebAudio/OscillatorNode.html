<script src="../include.js"></script>
<script>
    test(() => {
        const audioContext = new OfflineAudioContext(1, 5000, 44100);

        const oscillator = audioContext.createOscillator();

        // Check prototype
        let prototype = Object.getPrototypeOf(oscillator);

        while (prototype) {
            println(prototype.constructor.name);
            prototype = Object.getPrototypeOf(prototype);
        }

        // Context getter
        println(`context: '${oscillator.context}, is same as original: ${audioContext === oscillator.context}`);

        // Invalid type in constructor
        try {
            new OscillatorNode(audioContext, { type: 'custom' });
        } catch (e) {
            println(`Error creating node: '${e}'`);
        }

        // Type attribute
        println(`oscillator node type: '${oscillator.type}'`);
        try {
            oscillator.type = 'custom';
        } catch (e) {
            println(`Error: '${e}', type is: ${oscillator.type}`);
        }
        oscillator.type = 'triangle';
        println(`oscillator node type: '${oscillator.type}'`);
    });
</script>
